workspace(name = "e2e_core")

load("@bazel_tools//tools/build_defs/repo:http.bzl", "http_archive")

http_archive(
    name = "rules_nodejs",
    sha256 = "0e92c638f4c6783517d20df2c742671c1a151c37ad3f47c3fa90e4fd6d90bbd2",
    urls = ["https://github.com/bazelbuild/rules_nodejs/releases/download/4.4.1/rules_nodejs-core-4.4.1.tar.gz"],
)

load("@rules_nodejs//nodejs:repositories.bzl", "nodejs_register_toolchains", "rules_nodejs_dependencies")
load("npm_import.bzl", "npm_import")

# This just gives us bazel-skylib
rules_nodejs_dependencies()

nodejs_register_toolchains(
    name = "node16",
    node_version = "16.9.0",
)

# TODO: we should have a translate_package_lock rule like
# https://github.com/alexeagle/rules_nodejs/blob/stable/internal/npm_tarballs/translate_package_lock.bzl
# that automatically creates npm_import rules for everything the project already depends on.
# That would provide syntax sugar for the typical case where the dependencies were specified in package.json
# and a package manager already fetched integrity hashes from the registry.
npm_import(
    integrity = "sha512-ULr0LDaEqQrMFGyQ3bhJkLsbtrQ8QibAseGZeaSUiT/6zb9IvIkomWHJIvgvwad+hinRAgsI51JcWk2yvwyL+w==",
    package = "acorn",
    version = "8.4.0",
    deps = [],
)
